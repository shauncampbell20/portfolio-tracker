{% extends 'base.html' %}

{% block content %}
<button class="btn bg-transparent" onclick="window.history.back()">
  <img src="{{ url_for('static', filename='images/back.png') }}" width="12" height="12">
  Back
</button>
<div class="d-flex justify-content-center align-items-center min-vh-90">
  <div class="p-5 m-3 border bg-white w-50">
    <form method="post" id="enterForm">
      <h1 class="h3 mb-3 fw-normal">{% if request.path == url_for('transactions.edit', tran_id=tran.id) %} Edit {% else %} Enter {% endif %} Transaction</h1>
      <div><p>Enter a transaction to add it to your portfolio.</p></div>
      <!-- Flash Messages -->
       <div class="alert d-none" role="alert" id="enter-flash"></div>
      {% with messages = get_flashed_messages(with_categories=true) %}
        {% if messages %}
          {% for category, message in messages %}
          <div class="alert alert-info" role="alert">{{ message }}</div>
          {% endfor %}
        {% endif %}
      {% endwith %}

      <!-- Inputs -->
      <div class="form-floating">
        <input type="date" class="form-control" name="date" id="date" value="{{ tran.tran_date }}" placeholder="date" required>
        <label for="date" class="form-label">Tranaction Date</label>
      </div>
      <div class="p-3"></div>
      <div class="form-floating">
        <input name="symbol" class="form-control" id="symbol" value="{{ tran.symbol }}" placeholder="symbol" required>
        <label for="symbol" class="form-label">Symbol</label>
      </div>
      <div class="p-3"></div>
      <div class="form-floating">
        <select name="tran_type" class="form-select" id="tran_type" placeholder="buy" required>
          <option selected>{% if tran %} {{ tran.tran_type }} {% else %} Select transaction type {% endif %}</option>
          <option value="Buy">BUY</option>
          <option value="Sell">SELL</option>
          <option value="Fee">FEE</option>
        </select>
        <label for="tran_type" class="form-label">Type</label>
      </div>
      <div class="p-3"></div>
      <div class="form-floating">
        <input type="number" class="form-control" step="0.001" name="quantity" id="quantity" value="{{ tran.quantity }}" placeholder="quantity" required>
        <label for="quantity" class="form-label">Quantity</label>
        <small class="form-text text-muted">Must be a positive number.</small>
      </div>
      <div class="p-3"></div>
      <div class="form-floating">
        <input type="number" class="form-control" step="0.001" name="share-price" id="share-price" value="{{ tran.share_price }}" placeholder="shareprice" required>
        <label for="share-price" class="form-label">Price per Share</label>
        <small class="form-text text-muted">Must be a positive number.</small>
      </div>
      <div class="p-3"></div>
      <button class="btn btn-primary w-100 py-2" type="submit" id="enterButton">
        <span class="spinner-border spinner-border-sm d-none" role="status" aria-hidden="true" id="enterSpinner"></span>
        Enter</button>
    </form>
    <script type="text/javascript" src="{{ url_for('static', filename='js/enterTransaction.js') }}"></script>
  </div>
</div>
{% endblock %}